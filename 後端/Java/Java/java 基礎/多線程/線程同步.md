# 案例
- [[線程同步 賣票]]


# 同步代碼塊

## 安全問題出現的條件
- 是多線程環境
- 有共享數據
- 有多條語句操作共享數據

## 如何解決多線程安全問題呢?
- 基本思想: 讓程序沒有安全問題的環境

## 實現
- 把多條語句操作共享數據的代碼給鎖起來，讓任意時刻只能有一個線程執行即可
- Java提供了**同步代碼塊**的方式來解決
	- 鎖多條語句操作共享數據
	```java
	synchronized (任意對象) {
		多條語句操作共享數據的代碼
		只能有一條線程在此操作
	}
	```
	
- 同步的好處和弊端
	- 好處: 解決了多線程的數據安全問題
	- 弊端: 當線程很多時，因為每個線程都會去判斷同步上的鎖，這是很耗費資源的，無形中會降低程序的運行效率

# 同步方法
> 把 `synchronized` 關鍵字加到方法上

- 同步方法
	- `修飾符 synchronized 返回值 方法名(參數){}`
	- 同步方法鎖，對象是 `this`
- 同步靜態方法
	- `修飾符 static synchronized 返回值 方法名(參數){}`
	- 同步靜態方法鎖，對象是 `類名.class`